"use strict";(self.webpackChunkcassandre_trading_bot_website=self.webpackChunkcassandre_trading_bot_website||[]).push([[615],{340:(a,s,n)=>{n.r(s),n.d(s,{data:()=>e});const e={key:"v-02bfe88a",path:"/learn/dry-mode-and-backtesting.html",title:"Dry mode & backtesting",lang:"en-US",frontmatter:{lang:"en-US",title:"Dry mode & backtesting",description:"Learn how to simulate a virtual exchange and import historical data to test your strategy gains"},excerpt:"",headers:[{level:2,title:"Dry mode",slug:"dry-mode",children:[]},{level:2,title:"Backtesting",slug:"backtesting",children:[]}],filePathRelative:"learn/dry-mode-and-backtesting.md"}},1143:(a,s,n)=>{n.r(s),n.d(s,{default:()=>m});var e=n(6252);const t=(0,e.uE)('<h1 id="dry-mode-backtesting" tabindex="-1"><a class="header-anchor" href="#dry-mode-backtesting" aria-hidden="true">#</a> Dry mode &amp; backtesting</h1><h2 id="dry-mode" tabindex="-1"><a class="header-anchor" href="#dry-mode" aria-hidden="true">#</a> Dry mode</h2><p>Cassandre provides a dry mode allowing you to simulate a virtual exchange and its replies. You can enable it by setting the parameter <code>cassandre.trading.bot.exchange.modes.dry</code> to <code>true</code> in <code>src/main/resources/application.properties.</code></p><p>Cassandre will emulate valid exchange replies to your orders and will increase/decrease your virtual account. This way, you can test your strategy, see the gains you will make, and validate you have the results you expect.</p><p>The first step is to configure your(s) virtual account(s) balances; in Dry mode, Cassandre will search and import all files starting with <code>user</code> and ending with <code>.tsv</code> or <code>.csv</code> in <code>src/main/resources</code> or <code>src/test/resources</code>.</p><p>In those files, for each account, you set the balances of each cryptocurrency. For example, this is the content of <code>user-trade.csv</code> :</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>BTC,0.99962937\nUSDT,1000\nETH,10 \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>When you start Cassandre, you will see this:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>22:53:38 - Adding account &#39;trade&#39;\n22:53:38 - - Adding balance 0.99962937 BTC\n22:53:38 - - Adding balance 1000 USDT\n22:53:38 - - Adding balance 10 ETH\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Now you can create orders and positions, and this will increase/decrease your virtual account. Of course, Cassandre checks that you have enough assets before accepting your orders.</p><p>You can use the dry mode to test your trading bot with real data, but you can also use it for backtesting.</p><h2 id="backtesting" tabindex="-1"><a class="header-anchor" href="#backtesting" aria-hidden="true">#</a> Backtesting</h2><p>In simple words, backtesting a strategy is the process of testing a trading strategy on prior time periods. Cassandre trading bot allows you to simulate your bots&#39; reaction to historical data during tests.</p>',13),o=(0,e.Uk)("The first step is to add "),c={href:"https://search.maven.org/search?q=a:cassandre-trading-bot-spring-boot-starter-test",target:"_blank",rel:"noopener noreferrer"},p=(0,e.Uk)("cassandre-trading-bot-spring-boot-starter-test"),r=(0,e.Uk)(" to your project dependency."),l=(0,e.uE)('<p>Edit your <code>pom.xml</code> file and add this dependency :</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>\n\t\t...\n\t\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\n\t\t\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>tech.cassandre.trading.bot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\n\t\t\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cassandre-trading-bot-spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\n\t\t\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\n\t\t\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>\n\t\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>\n\t\t...\n\t<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',2),i=(0,e.Uk)("Now, we need to generate the data we want to use during the JUnit tests. We can use the "),d={href:"https://docs.kucoin.com/#get-klines",target:"_blank",rel:"noopener noreferrer"},u=(0,e.Uk)("Kucoin API"),g=(0,e.Uk)("; to do so, run this on the command line :"),k=(0,e.uE)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">startDate</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> --date<span class="token operator">=</span><span class="token string">&quot;3 months ago&quot;</span> +<span class="token string">&quot;%s&quot;</span><span class="token variable">`</span></span>\n<span class="token assign-left variable">endDate</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +<span class="token string">&quot;%s&quot;</span><span class="token variable">`</span></span>\n<span class="token function">curl</span> -s <span class="token string">&quot;https://api.kucoin.com/api/v1/market/candles?type=1day&amp;symbol=BTC-USDT&amp;startAt=<span class="token variable">${startDate}</span>&amp;endAt=<span class="token variable">${endDate}</span>&quot;</span> <span class="token punctuation">\\</span>\n<span class="token operator">|</span> jq -r -c <span class="token string">&quot;.data[] | @tsv&quot;</span> <span class="token punctuation">\\</span>\n<span class="token operator">|</span> <span class="token function">tac</span> <span class="token variable">$1</span> <span class="token operator">&gt;</span> tickers-btc-usdt.tsv\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>It will create a file named <code>tickers-btc-usdt.tsv</code> that contains the historical rate of BTC-USDT from <code>startDate</code> (3 months ago) to <code>endDate</code> (now). Of course, you can choose your own dates and currency pair.</p><p>Place this file in the <code>src/test/resources</code> folder of your project and add this line to your JUnit test class:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">TickerFluxMock</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Now, during the tests, instead of receiving tickers from the exchange, you will receive tickers imported from the <code>tsv/csv</code> files you put in <code>src/test/resources</code>.</p><p>You can see an example of dry mode and backtesting in the <a href="./technical-analysis">Technical analysis chapter</a>.</p>',6),b={},m=(0,n(3744).Z)(b,[["render",function(a,s){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[t,(0,e._)("p",null,[o,(0,e._)("a",c,[p,(0,e.Wm)(n)]),r]),l,(0,e._)("p",null,[i,(0,e._)("a",d,[u,(0,e.Wm)(n)]),g]),k],64)}]])},3744:(a,s)=>{s.Z=(a,s)=>{const n=a.__vccOpts||a;for(const[a,e]of s)n[a]=e;return n}}}]);